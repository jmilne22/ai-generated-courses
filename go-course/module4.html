<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module 4: Interfaces & Polymorphism | Go From Python</title>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&family=Space+Grotesk:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body data-module="4">
    <div class="container">
        <nav>
            <a href="module3.html">‚Üê Module 3</a>
            <a href="module5.html">Module 5 ‚Üí</a>
        </nav>
        <div class="module-tag">// MODULE 04</div>
        <h1>Interfaces & Polymorphism</h1>
        <p class="module-desc">Implicit interfaces, type assertions, and thinking in behaviors. This is Go's secret weapon.</p>

        <div class="lesson">
            <h2>Interfaces Are Implicit</h2>
            <p>In Python you'd use duck typing or ABC. In Go, interfaces are <strong>implicit</strong> ‚Äî no "implements" keyword.</p>
            <div class="code-block">
                <div class="code-header">Implicit implementation</div>
                <pre><span class="comment">// Define an interface</span>
<span class="keyword">type</span> <span class="type">Speaker</span> <span class="keyword">interface</span> {
    <span class="func">Speak</span>() <span class="type">string</span>
}

<span class="comment">// Any type with Speak() method implements Speaker</span>
<span class="keyword">type</span> <span class="type">Dog</span> <span class="keyword">struct</span>{ Name <span class="type">string</span> }
<span class="keyword">func</span> (d <span class="type">Dog</span>) <span class="func">Speak</span>() <span class="type">string</span> { <span class="keyword">return</span> <span class="string">"Woof!"</span> }

<span class="keyword">type</span> <span class="type">Cat</span> <span class="keyword">struct</span>{ Name <span class="type">string</span> }
<span class="keyword">func</span> (c <span class="type">Cat</span>) <span class="func">Speak</span>() <span class="type">string</span> { <span class="keyword">return</span> <span class="string">"Meow!"</span> }

<span class="comment">// Both work as Speaker ‚Äî no declaration needed!</span>
<span class="keyword">func</span> <span class="func">MakeSound</span>(s <span class="type">Speaker</span>) {
    fmt.<span class="func">Println</span>(s.<span class="func">Speak</span>())
}

<span class="func">MakeSound</span>(<span class="type">Dog</span>{<span class="string">"Rex"</span>})  <span class="comment">// Woof!</span>
<span class="func">MakeSound</span>(<span class="type">Cat</span>{<span class="string">"Whiskers"</span>})  <span class="comment">// Meow!</span></pre>
            </div>
            <div class="tip">
                <div class="tip-title">The Magic</div>
                <p>Dog and Cat never mention Speaker. They just have the right method. Go figures it out.</p>
            </div>
        </div>

        <div class="lesson">
            <h2>Common Standard Library Interfaces</h2>
            <div class="code-block">
                <div class="code-header">Interfaces you'll use constantly</div>
                <pre><span class="comment">// io.Reader ‚Äî anything you can read from</span>
<span class="keyword">type</span> <span class="type">Reader</span> <span class="keyword">interface</span> {
    <span class="func">Read</span>(p []<span class="type">byte</span>) (n <span class="type">int</span>, err <span class="type">error</span>)
}

<span class="comment">// io.Writer ‚Äî anything you can write to</span>
<span class="keyword">type</span> <span class="type">Writer</span> <span class="keyword">interface</span> {
    <span class="func">Write</span>(p []<span class="type">byte</span>) (n <span class="type">int</span>, err <span class="type">error</span>)
}

<span class="comment">// fmt.Stringer ‚Äî custom string representation</span>
<span class="keyword">type</span> <span class="type">Stringer</span> <span class="keyword">interface</span> {
    <span class="func">String</span>() <span class="type">string</span>
}

<span class="comment">// error ‚Äî yes, it's just an interface!</span>
<span class="keyword">type</span> <span class="type">error</span> <span class="keyword">interface</span> {
    <span class="func">Error</span>() <span class="type">string</span>
}</pre>
            </div>
        </div>

        <div class="lesson">
            <h2>The Empty Interface: any</h2>
            <p>The empty interface <span class="inline-code">interface{}</span> (or <span class="inline-code">any</span> in Go 1.18+) matches everything.</p>
            <div class="code-block">
                <div class="code-header">Empty interface</div>
                <pre><span class="comment">// Accepts anything</span>
<span class="keyword">func</span> <span class="func">PrintAnything</span>(v <span class="type">any</span>) {
    fmt.<span class="func">Println</span>(v)
}

<span class="func">PrintAnything</span>(<span class="number">42</span>)
<span class="func">PrintAnything</span>(<span class="string">"hello"</span>)
<span class="func">PrintAnything</span>([]<span class="type">int</span>{<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>})

<span class="comment">// Map with any values</span>
data := <span class="keyword">map</span>[<span class="type">string</span>]<span class="type">any</span>{
    <span class="string">"name"</span>: <span class="string">"Alice"</span>,
    <span class="string">"age"</span>:  <span class="number">30</span>,
    <span class="string">"active"</span>: <span class="keyword">true</span>,
}</pre>
            </div>
            <div class="warning">
                <div class="warning-title">Use Sparingly</div>
                <p><span class="inline-code">any</span> loses type safety. Prefer specific interfaces when possible.</p>
            </div>
        </div>

        <div class="lesson">
            <h2>Type Assertions & Type Switches</h2>
            <div class="code-block">
                <div class="code-header">Type assertion</div>
                <pre><span class="keyword">var</span> i <span class="type">any</span> = <span class="string">"hello"</span>

<span class="comment">// Type assertion (may panic!)</span>
s := i.(<span class="type">string</span>)
fmt.<span class="func">Println</span>(s)  <span class="comment">// "hello"</span>

<span class="comment">// Safe type assertion with ok</span>
s, ok := i.(<span class="type">string</span>)
<span class="keyword">if</span> ok {
    fmt.<span class="func">Println</span>(<span class="string">"It's a string:"</span>, s)
}

<span class="comment">// Type switch ‚Äî handle multiple types</span>
<span class="keyword">func</span> <span class="func">describe</span>(i <span class="type">any</span>) {
    <span class="keyword">switch</span> v := i.(<span class="keyword">type</span>) {
    <span class="keyword">case</span> <span class="type">int</span>:
        fmt.<span class="func">Printf</span>(<span class="string">"Integer: %d\n"</span>, v)
    <span class="keyword">case</span> <span class="type">string</span>:
        fmt.<span class="func">Printf</span>(<span class="string">"String: %s\n"</span>, v)
    <span class="keyword">case</span> <span class="type">bool</span>:
        fmt.<span class="func">Printf</span>(<span class="string">"Boolean: %t\n"</span>, v)
    <span class="keyword">default</span>:
        fmt.<span class="func">Printf</span>(<span class="string">"Unknown type\n"</span>)
    }
}</pre>
            </div>
        </div>

        <div class="lesson">
            <h2>Interface Design Principles</h2>
            <h3>Keep Interfaces Small</h3>
            <div class="code-block">
                <div class="code-header">Small interfaces</div>
                <pre><span class="comment">// ‚úì Good ‚Äî small, focused</span>
<span class="keyword">type</span> <span class="type">Reader</span> <span class="keyword">interface</span> {
    <span class="func">Read</span>(p []<span class="type">byte</span>) (n <span class="type">int</span>, err <span class="type">error</span>)
}

<span class="comment">// ‚úì Compose when needed</span>
<span class="keyword">type</span> <span class="type">ReadWriter</span> <span class="keyword">interface</span> {
    <span class="type">Reader</span>
    <span class="type">Writer</span>
}

<span class="comment">// ‚ùå Avoid ‚Äî too big, hard to implement</span>
<span class="keyword">type</span> <span class="type">DoEverything</span> <span class="keyword">interface</span> {
    <span class="func">Read</span>() <span class="type">error</span>
    <span class="func">Write</span>() <span class="type">error</span>
    <span class="func">Close</span>() <span class="type">error</span>
    <span class="func">Flush</span>() <span class="type">error</span>
    <span class="comment">// ... 10 more methods</span>
}</pre>
            </div>

            <h3>Accept Interfaces, Return Structs</h3>
            <div class="code-block">
                <div class="code-header">Interface guidelines</div>
                <pre><span class="comment">// ‚úì Accept interface ‚Äî flexible</span>
<span class="keyword">func</span> <span class="func">Process</span>(r io.<span class="type">Reader</span>) <span class="type">error</span> {
    <span class="comment">// Works with files, network, strings, etc.</span>
}

<span class="comment">// ‚úì Return concrete type ‚Äî clear</span>
<span class="keyword">func</span> <span class="func">NewServer</span>() *<span class="type">Server</span> {
    <span class="keyword">return</span> &<span class="type">Server</span>{}
}</pre>
            </div>
        </div>

        <div class="lesson">
            <h2>Exercises</h2>
            
            <p>Progress through each section in order, or jump to where you need practice.</p>

            <div style="background: var(--bg-card); border-radius: 8px; padding: 1rem 1.5rem; margin: 1rem 0 2rem 0;">
                <div style="font-weight: 600; margin-bottom: 0.75rem; color: var(--text);">Jump to section:</div>
                <div style="display: flex; flex-wrap: wrap; gap: 0.5rem 1rem; font-size: 0.9rem;">
                    <a href="#warmups" style="color: var(--green-bright);">üî• Warmups</a>
                    <a href="#challenges" style="color: var(--orange);">üí™ Challenges</a>
                </div>
            </div>

            <div style="display: flex; align-items: center; gap: 1rem; margin-top: 1.5rem;">
                <h3 id="warmups" style="color: var(--green-bright); margin: 0;">üî• Warmups</h3>
                <button id="shuffle-warmups-btn" onclick="shuffleWarmups()" style="background: var(--bg-card); border: 2px solid var(--green-bright); color: var(--green-bright); padding: 0.4rem 0.9rem; border-radius: 6px; cursor: pointer; font-size: 0.8rem; font-family: 'JetBrains Mono', monospace; transition: all 0.3s;">üé≤ Shuffle</button>
            </div>
            <p style="color: var(--text-dim); font-size: 0.9rem; margin-bottom: 1rem;">Practice individual concepts you just learned.</p>

            <div id="warmups-container">
            <noscript><p class="js-required">JavaScript is required for the interactive exercises.</p></noscript>
            </div>

            <h3 id="challenges" style="color: var(--orange); margin-top: 2rem;">üí™ Challenges</h3>
            <p style="color: var(--text-dim); font-size: 0.9rem; margin-bottom: 0.5rem;">Combine concepts and learn patterns. Each challenge has multiple variants at different difficulties.</p>

            <div style="display: flex; justify-content: flex-end; margin-bottom: 1rem;">
                <button id="shuffle-challenges-btn" onclick="shuffleChallenges()" style="background: var(--bg-card); border: 1px solid var(--orange); color: var(--orange); padding: 0.5rem 1rem; border-radius: 6px; cursor: pointer; font-family: 'JetBrains Mono', monospace; font-size: 0.8rem; transition: all 0.3s;">
                    üé≤ Shuffle Challenges
                </button>
            </div>

            <div id="challenges-container">
            <noscript><p class="js-required">JavaScript is required for the interactive exercises.</p></noscript>
            </div>
        </div>

        <div class="lesson">
            <h2>Module 4 Summary</h2>
            <ul>
                <li><strong>Implicit implementation</strong> ‚Äî no "implements" keyword</li>
                <li><strong>Small interfaces</strong> ‚Äî 1-3 methods ideal</li>
                <li><strong>any/interface{}</strong> ‚Äî matches everything, use sparingly</li>
                <li><strong>Type assertions</strong> ‚Äî extract concrete type from interface</li>
                <li><strong>Type switches</strong> ‚Äî handle multiple types elegantly</li>
                <li><strong>Accept interfaces, return structs</strong></li>
            </ul>
        </div>

        <div class="nav-buttons">
            <a href="module3.html" class="nav-btn">‚Üê Module 3</a>
            <a href="module5.html" class="nav-btn primary">Module 5: Data Structures ‚Üí</a>
        </div>
    </div>
    <script src="module-loader.js"></script>
    <script src="course.js"></script>
    <script src="theme.js"></script>
    <script src="sidebar.js"></script>
    <script src="srs.js"></script>
    <script src="progress.js"></script>
</body>
</html>
