<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module 3: Structs Deep Dive | Go From Python</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&family=Space+Grotesk:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body data-module="3">
    <div class="container">
        <nav>
            <a href="module2.html">‚Üê Module 2</a>
            <a href="module4.html">Module 4 ‚Üí</a>
        </nav>
        <div class="module-header">
            <div class="module-tag">// MODULE 03</div>
            <h1>Structs Deep Dive</h1>
            <p class="module-desc">Go's alternative to classes. Composition over inheritance, methods, and struct tags.</p>
        </div>

        <div class="lesson">
            <h2>Structs vs Classes</h2>
            <p>Go doesn't have classes. Instead, it has structs + methods. It's simpler and more flexible.</p>
            <div class="code-compare">
                <div class="code-block" style="margin:0">
                    <div class="code-header python">Python Class</div>
                    <pre><span class="keyword">class</span> <span class="type">User</span>:
    <span class="keyword">def</span> <span class="func">__init__</span>(self, name, age):
        self.name = name
        self.age = age
    
    <span class="keyword">def</span> <span class="func">greet</span>(self):
        <span class="keyword">return</span> <span class="string">f"Hi, I'm </span>{self.name}<span class="string">"</span>

u = User(<span class="string">"Alice"</span>, <span class="number">30</span>)</pre>
                </div>
                <div class="code-block" style="margin:0">
                    <div class="code-header go">Go Struct</div>
                    <pre><span class="keyword">type</span> <span class="type">User</span> <span class="keyword">struct</span> {
    Name <span class="type">string</span>
    Age  <span class="type">int</span>
}

<span class="keyword">func</span> (u <span class="type">User</span>) <span class="func">Greet</span>() <span class="type">string</span> {
    <span class="keyword">return</span> fmt.<span class="func">Sprintf</span>(<span class="string">"Hi, I'm %s"</span>, u.Name)
}

u := <span class="type">User</span>{Name: <span class="string">"Alice"</span>, Age: <span class="number">30</span>}</pre>
                </div>
            </div>
        </div>

        <div class="lesson">
            <h2>Creating Structs</h2>
            <div class="code-block">
                <div class="code-header go">Different ways to create structs</div>
                <pre><span class="keyword">type</span> <span class="type">User</span> <span class="keyword">struct</span> {
    Name  <span class="type">string</span>
    Email <span class="type">string</span>
    Age   <span class="type">int</span>
}

<span class="comment">// Named fields (preferred)</span>
u1 := <span class="type">User</span>{Name: <span class="string">"Alice"</span>, Email: <span class="string">"alice@example.com"</span>, Age: <span class="number">30</span>}

<span class="comment">// Positional (fragile, avoid)</span>
u2 := <span class="type">User</span>{<span class="string">"Bob"</span>, <span class="string">"bob@example.com"</span>, <span class="number">25</span|}

<span class="comment">// Zero value struct</span>
<span class="keyword">var</span> u3 <span class="type">User</span>  <span class="comment">// All fields are zero values</span>

<span class="comment">// Pointer to struct</span>
u4 := &<span class="type">User</span>{Name: <span class="string">"Charlie"</span|}

<span class="comment">// Access fields</span>
fmt.<span class="func">Println</span>(u1.Name)
u1.Age = <span class="number">31</span></pre>
            </div>
        </div>

        <div class="lesson">
            <h2>Methods</h2>
            <p>Methods are functions with a <strong>receiver</strong> ‚Äî the struct they operate on.</p>
            <div class="code-block">
                <div class="code-header go">Value vs Pointer Receivers</div>
                <pre><span class="keyword">type</span> <span class="type">Counter</span> <span class="keyword">struct</span> {
    count <span class="type">int</span>
}

<span class="comment">// Value receiver: gets a COPY</span>
<span class="keyword">func</span> (c <span class="type">Counter</span>) <span class="func">Value</span>() <span class="type">int</span> {
    <span class="keyword">return</span> c.count
}

<span class="comment">// Pointer receiver: modifies original</span>
<span class="keyword">func</span> (c *<span class="type">Counter</span>) <span class="func">Increment</span>() {
    c.count++
}

c := <span class="type">Counter</span>{}
c.<span class="func">Increment</span>()
fmt.<span class="func">Println</span>(c.<span class="func">Value</span>())  <span class="comment">// 1</span></pre>
            </div>
            <div class="warning">
                <div class="warning-title">Rule</div>
                <p>If any method needs a pointer receiver, make ALL methods use pointer receivers for consistency.</p>
            </div>
        </div>

        <div class="lesson">
            <h2>Struct Embedding (Composition)</h2>
            <p>Go doesn't have inheritance. Instead, embed structs to compose behavior.</p>
            <div class="code-block">
                <div class="code-header go">Embedding</div>
                <pre><span class="keyword">type</span> <span class="type">Person</span> <span class="keyword">struct</span> {
    Name string
    Age  int
}

<span class="keyword">func</span> (p <span class="type">Person</span>) <span class="func">Greet</span>() <span class="type">string</span> {
    <span class="keyword">return</span> <span class="string">"Hi, I'm "</span> + p.Name
}

<span class="comment">// Employee embeds Person</span>
<span class="keyword">type</span> <span class="type">Employee</span> <span class="keyword">struct</span> {
    <span class="type">Person</span>          <span class="comment">// Embedded (no field name)</span>
    Company <span class="type">string</span>
    Salary  <span class="type">int</span>
}

e := <span class="type">Employee</span>{
    Person:  <span class="type">Person</span>{Name: <span class="string">"Alice"</span>, Age: <span class="number">30</span>},
    Company: <span class="string">"Acme"</span>,
    Salary:  <span class="number">100000</span>,
}

<span class="comment">// Access embedded fields directly</span>
fmt.<span class="func">Println</span>(e.Name)     <span class="comment">// "Alice" - promoted from Person</span>
fmt.<span class="func">Println</span>(e.<span class="func">Greet</span>())  <span class="comment">// "Hi, I'm Alice" - method promoted</span></pre>
            </div>
            <div class="tip">
                <div class="tip-title">Composition over Inheritance</div>
                <p>This is more flexible than inheritance. You can embed multiple types and override methods.</p>
            </div>
        </div>

        <div class="lesson">
            <h2>Struct Tags</h2>
            <p>Tags add metadata to fields ‚Äî used for JSON, database mapping, validation, etc.</p>
            <div class="code-block">
                <div class="code-header go">Struct tags</div>
                <pre><span class="keyword">type</span> <span class="type">User</span> <span class="keyword">struct</span> {
    ID        <span class="type">int</span>       <span class="string">`json:"id" db:"user_id"`</span>
    Name      <span class="type">string</span>    <span class="string">`json:"name"`</span>
    Email     <span class="type">string</span>    <span class="string">`json:"email" validate:"required,email"`</span>
    Password  <span class="type">string</span>    <span class="string">`json:"-"`</span>              <span class="comment">// Excluded from JSON</span>
    CreatedAt time.Time <span class="string">`json:"created_at,omitempty"`</span>
}

<span class="comment">// JSON encoding respects tags</span>
user := <span class="type">User</span>{ID: <span class="number">1</span>, Name: <span class="string">"Alice"</span>, Password: <span class="string">"secret"</span>}
data, _ := json.<span class="func">Marshal</span>(user)
<span class="comment">// {"id":1,"name":"Alice","email":""}</span>
<span class="comment">// Note: Password excluded, CreatedAt omitted (zero value)</span></pre>
            </div>
        </div>

        <div class="lesson">
            <h2>Constructor Functions</h2>
            <p>Go doesn't have constructors. Use factory functions instead.</p>
            <div class="code-block">
                <div class="code-header go">Constructor pattern</div>
                <pre><span class="keyword">type</span> <span class="type">Server</span> <span class="keyword">struct</span> {
    host    <span class="type">string</span>
    port    <span class="type">int</span>
    timeout time.Duration
}

<span class="comment">// Constructor function (convention: New + TypeName)</span>
<span class="keyword">func</span> <span class="func">NewServer</span>(host <span class="type">string</span>, port <span class="type">int</span>) *<span class="type">Server</span> {
    <span class="keyword">return</span> &<span class="type">Server</span>{
        host:    host,
        port:    port,
        timeout: <span class="number">30</span> * time.Second, <span class="comment">// Default value</span>
    }
}

<span class="comment">// With validation</span>
<span class="keyword">func</span> <span class="func">NewServer</span>(host <span class="type">string</span>, port <span class="type">int</span>) (*<span class="type">Server</span>, <span class="type">error</span>) {
    <span class="keyword">if</span> port < <span class="number">1</span> || port > <span class="number">65535</span> {
        <span class="keyword">return</span> <span class="keyword">nil</span>, errors.<span class="func">New</span>(<span class="string">"invalid port"</span>)
    }
    <span class="keyword">return</span> &<span class="type">Server</span>{host: host, port: port}, <span class="keyword">nil</span>
}</pre>
            </div>
        </div>

        <div class="lesson">
            <h2>Exercises</h2>
            
            <p>Progress through each section in order, or jump to where you need practice.</p>

            <div style="background: var(--bg-card); border-radius: 8px; padding: 1rem 1.5rem; margin: 1rem 0 2rem 0;">
                <div style="font-weight: 600; margin-bottom: 0.75rem; color: var(--text);">Jump to section:</div>
                <div style="display: flex; flex-wrap: wrap; gap: 0.5rem 1rem; font-size: 0.9rem;">
                    <a href="#warmups" style="color: var(--green-bright);">üî• Warmups</a>
                    <a href="#challenges" style="color: var(--orange);">üí™ Challenges</a>
                </div>
            </div>

            <div style="display: flex; align-items: center; gap: 1rem; margin-top: 1.5rem;">
                <h3 id="warmups" style="color: var(--green-bright); margin: 0;">üî• Warmups</h3>
                <button id="shuffle-warmups-btn" onclick="shuffleWarmups()" style="background: var(--bg-card); border: 2px solid var(--green-bright); color: var(--green-bright); padding: 0.4rem 0.9rem; border-radius: 6px; cursor: pointer; font-size: 0.8rem; font-family: 'JetBrains Mono', monospace; transition: all 0.3s;">üé≤ Shuffle</button>
            </div>
            <p style="color: var(--text-dim); font-size: 0.9rem; margin-bottom: 1rem;">Practice individual concepts you just learned.</p>

            <div id="warmups-container">
            <noscript><p class="js-required">JavaScript is required for the interactive exercises.</p></noscript>
            </div>

            <h3 id="challenges" style="color: var(--orange); margin-top: 2rem;">üí™ Challenges</h3>
            <p style="color: var(--text-dim); font-size: 0.9rem; margin-bottom: 0.5rem;">Combine concepts and learn patterns. Each challenge has multiple variants at different difficulties.</p>

            <div style="display: flex; justify-content: flex-end; margin-bottom: 1rem;">
                <button id="shuffle-challenges-btn" onclick="shuffleChallenges()" style="background: var(--bg-card); border: 1px solid var(--orange); color: var(--orange); padding: 0.5rem 1rem; border-radius: 6px; cursor: pointer; font-family: 'JetBrains Mono', monospace; font-size: 0.8rem; transition: all 0.3s;">
                    üé≤ Shuffle Challenges
                </button>
            </div>

            <div id="challenges-container">
            <noscript><p class="js-required">JavaScript is required for the interactive exercises.</p></noscript>
            </div>
        </div>

        <div class="lesson">
            <h2>Module 3 Summary</h2>
            <ul>
                <li><strong>Structs</strong> = Go's data containers (no classes)</li>
                <li><strong>Methods</strong> = functions with receivers</li>
                <li><strong>Pointer receivers</strong> for mutation, value receivers for reading</li>
                <li><strong>Embedding</strong> = composition over inheritance</li>
                <li><strong>Tags</strong> = metadata for JSON, DB, validation</li>
                <li><strong>NewX()</strong> = constructor function pattern</li>
            </ul>
        </div>

        <div class="nav-buttons">
            <a href="module2.html" class="nav-btn">‚Üê Module 2</a>
            <a href="module4.html" class="nav-btn primary">Module 4: Interfaces ‚Üí</a>
        </div>
    </div>
    <script src="module-loader.js"></script>
    <script src="course.js"></script>
    <script src="theme.js"></script>
    <script src="sidebar.js"></script>
    <script src="srs.js"></script>
    <script src="progress.js"></script>
</body>
</html>
