<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project: Task Runner | Go From Python</title>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&family=Space+Grotesk:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="icon" href="favicon.svg" type="image/svg+xml">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="themes/oled-dark.css">
    <link rel="stylesheet" href="themes/light.css">
    <link rel="stylesheet" href="themes/gruvbox-dark.css">
    <link rel="stylesheet" href="themes/gruvbox-light.css">
    <link rel="stylesheet" href="themes/solarized-dark.css">
    <link rel="stylesheet" href="themes/solarized-light.css">
    <link rel="stylesheet" href="themes/everforest-dark.css">
    <link rel="stylesheet" href="themes/everforest-light.css">
    <link rel="stylesheet" href="themes/persona5-dark.css">
    <link rel="stylesheet" href="themes/factorio-dark.css">
</head>
<body>
    <div class="container">
        <nav><a href="module7.html">‚Üê Module 7</a><a href="index.html">Course Home ‚Üí</a></nav>
        <div class="module-tag">// PROJECT</div>
        <h1>üî® Task Runner</h1>
        <p class="module-desc">Build a simple task runner that reads YAML configs and executes commands. Applies concepts from Module 7: Files, YAML & Shell.</p>

        <div class="lesson">
            <h2>Project Goals</h2>
            <p>Build a simple task runner that:</p>
            <ol>
                <li>Reads <span class="inline-code">tasks.yaml</span> from current directory</li>
                <li>Lists available tasks with <span class="inline-code">mytask list</span></li>
                <li>Runs a task with <span class="inline-code">mytask run build</span></li>
                <li>Handles task dependencies (run deps first)</li>
                <li>Shows real-time output while running</li>
            </ol>
        </div>

        <div class="lesson">
            <h2>Starter Code</h2>
            <div class="code-block">
                <div class="code-header">runTask function</div>
                <pre><span class="keyword">func</span> <span class="func">runTask</span>(config *<span class="type">Config</span>, taskName <span class="type">string</span>, ran <span class="keyword">map</span>[<span class="type">string</span>]<span class="type">bool</span>) <span class="type">error</span> {
    <span class="keyword">if</span> ran[taskName] {
        <span class="keyword">return</span> <span class="keyword">nil</span>  <span class="comment">// Already ran</span>
    }
    
    task, ok := config.Tasks[taskName]
    <span class="keyword">if</span> !ok {
        <span class="keyword">return</span> fmt.<span class="func">Errorf</span>(<span class="string">"unknown task: %s"</span>, taskName)
    }
    
    <span class="comment">// Run dependencies first</span>
    <span class="keyword">for</span> _, dep := <span class="keyword">range</span> task.DependsOn {
        <span class="keyword">if</span> err := <span class="func">runTask</span>(config, dep, ran); err != <span class="keyword">nil</span> {
            <span class="keyword">return</span> err
        }
    }
    
    fmt.<span class="func">Printf</span>(<span class="string">"‚ñ∂ Running: %s\n"</span>, taskName)
    cmd := exec.<span class="func">Command</span>(<span class="string">"bash"</span>, <span class="string">"-c"</span>, task.Command)
    cmd.Stdout = os.Stdout
    cmd.Stderr = os.Stderr
    
    <span class="keyword">if</span> err := cmd.<span class="func">Run</span>(); err != <span class="keyword">nil</span> {
        <span class="keyword">return</span> fmt.<span class="func">Errorf</span>(<span class="string">"task %s failed: %w"</span>, taskName, err)
    }
    
    ran[taskName] = <span class="keyword">true</span>
    <span class="keyword">return</span> <span class="keyword">nil</span>
}</pre>
            </div>
        </div>

        <div class="lesson">
            <h2>Example tasks.yaml</h2>
            <div class="code-block">
                <div class="code-header yaml">tasks.yaml</div>
                <pre>name: my-project
version: "1.0"

tasks:
  build:
    command: go build -o app .
    description: Build the application
  
  test:
    command: go test ./...
    description: Run tests
    depends_on:
      - build
  
  clean:
    command: rm -f app
    description: Clean build artifacts</pre>
            </div>
        </div>

        <div class="tip">
            <div class="tip-title">Skills Used</div>
            <p>YAML parsing, file I/O, exec.Command, dependency graphs, CLI design.</p>
        </div>

        <div class="nav-buttons">
            <a href="module7.html" class="nav-btn">‚Üê Back to Module 7</a>
            <a href="index.html" class="nav-btn primary">Course Home</a>
        </div>
    </div>
    <script src="theme.js"></script>
    <script src="sidebar.js"></script>
</body>
</html>

