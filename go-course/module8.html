<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module 8: Building TUIs | Go From Python</title>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&family=Space+Grotesk:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="gamification.css">
</head>
<body>
    <div class="container">
        <nav>
            <a href="module7.html">‚Üê Module 7</a>
            <a href="module9.html">Module 9 ‚Üí</a>
        </nav>
        <div class="module-tag">// MODULE 08</div>
        <h1>Building TUIs</h1>
        <p class="module-desc">Terminal User Interfaces with Bubble Tea. Build interactive CLI apps that look amazing.</p>

        <div class="lesson">
            <h2>What is Bubble Tea?</h2>
            <p>Bubble Tea is a TUI framework based on The Elm Architecture: <strong>Model ‚Üí Update ‚Üí View</strong></p>
            <div class="code-block">
                <div class="code-header terminal">Install</div>
                <pre>go get github.com/charmbracelet/bubbletea
go get github.com/charmbracelet/lipgloss  <span class="comment"># Styling</span>
go get github.com/charmbracelet/bubbles   <span class="comment"># Pre-built components</span></pre>
            </div>
            <div class="tui-demo">
<span style="color: var(--green-bright)">? Select a task:</span>
<br><span style="color: var(--purple)">‚ùØ</span> <span style="color: var(--text-main)">build</span> <span style="color: var(--text-dim)">- Build the application</span>
<br>  <span style="color: var(--text-dim)">test - Run all tests</span>
<br>  <span style="color: var(--text-dim)">deploy - Deploy to production</span>
<br>  <span style="color: var(--text-dim)">clean - Remove build artifacts</span>
<br><br><span style="color: var(--text-dim)">‚Üë/‚Üì: navigate ‚Ä¢ enter: select ‚Ä¢ q: quit</span>
            </div>
        </div>

        <div class="lesson">
            <h2>The Elm Architecture</h2>
            <div class="code-block">
                <div class="code-header">Basic structure</div>
                <pre><span class="keyword">package</span> main

<span class="keyword">import</span> (
    <span class="string">"fmt"</span>
    tea <span class="string">"github.com/charmbracelet/bubbletea"</span>
)

<span class="comment">// MODEL: Your application state</span>
<span class="keyword">type</span> <span class="type">model</span> <span class="keyword">struct</span> {
    choices  []<span class="type">string</span>
    cursor   <span class="type">int</span>
    selected <span class="keyword">map</span>[<span class="type">int</span>]<span class="keyword">struct</span>{}
}

<span class="comment">// INIT: Initial state and optional command</span>
<span class="keyword">func</span> <span class="func">initialModel</span>() <span class="type">model</span> {
    <span class="keyword">return</span> <span class="type">model</span>{
        choices:  []<span class="type">string</span>{<span class="string">"Buy milk"</span>, <span class="string">"Walk dog"</span>, <span class="string">"Write code"</span>},
        selected: <span class="keyword">make</span>(<span class="keyword">map</span>[<span class="type">int</span>]<span class="keyword">struct</span>{}),
    }
}

<span class="keyword">func</span> (m <span class="type">model</span>) <span class="func">Init</span>() tea.Cmd {
    <span class="keyword">return</span> <span class="keyword">nil</span>  <span class="comment">// No initial command</span>
}

<span class="comment">// UPDATE: Handle messages (key presses, etc)</span>
<span class="keyword">func</span> (m <span class="type">model</span>) <span class="func">Update</span>(msg tea.Msg) (tea.Model, tea.Cmd) {
    <span class="keyword">switch</span> msg := msg.(<span class="keyword">type</span>) {
    <span class="keyword">case</span> tea.KeyMsg:
        <span class="keyword">switch</span> msg.<span class="func">String</span>() {
        <span class="keyword">case</span> <span class="string">"q"</span>, <span class="string">"ctrl+c"</span>:
            <span class="keyword">return</span> m, tea.<span class="func">Quit</span>
        <span class="keyword">case</span> <span class="string">"up"</span>, <span class="string">"k"</span>:
            <span class="keyword">if</span> m.cursor > <span class="number">0</span> {
                m.cursor--
            }
        <span class="keyword">case</span> <span class="string">"down"</span>, <span class="string">"j"</span>:
            <span class="keyword">if</span> m.cursor < <span class="func">len</span>(m.choices)-<span class="number">1</span> {
                m.cursor++
            }
        <span class="keyword">case</span> <span class="string">"enter"</span>, <span class="string">" "</span>:
            <span class="keyword">if</span> _, ok := m.selected[m.cursor]; ok {
                <span class="func">delete</span>(m.selected, m.cursor)
            } <span class="keyword">else</span> {
                m.selected[m.cursor] = <span class="keyword">struct</span>{}{}
            }
        }
    }
    <span class="keyword">return</span> m, <span class="keyword">nil</span>
}

<span class="comment">// VIEW: Render the UI as a string</span>
<span class="keyword">func</span> (m <span class="type">model</span>) <span class="func">View</span>() <span class="type">string</span> {
    s := <span class="string">"What do you want to do?\n\n"</span>
    
    <span class="keyword">for</span> i, choice := <span class="keyword">range</span> m.choices {
        cursor := <span class="string">" "</span>
        <span class="keyword">if</span> m.cursor == i {
            cursor = <span class="string">">"</span>
        }
        
        checked := <span class="string">" "</span>
        <span class="keyword">if</span> _, ok := m.selected[i]; ok {
            checked = <span class="string">"x"</span>
        }
        
        s += fmt.<span class="func">Sprintf</span>(<span class="string">"%s [%s] %s\n"</span>, cursor, checked, choice)
    }
    
    s += <span class="string">"\nPress q to quit.\n"</span>
    <span class="keyword">return</span> s
}

<span class="keyword">func</span> <span class="func">main</span>() {
    p := tea.<span class="func">NewProgram</span>(<span class="func">initialModel</span>())
    <span class="keyword">if</span> _, err := p.<span class="func">Run</span>(); err != <span class="keyword">nil</span> {
        fmt.<span class="func">Println</span>(<span class="string">"Error:"</span>, err)
    }
}</pre>
            </div>
        </div>

        <div class="lesson">
            <h2>Styling with Lipgloss</h2>
            <div class="code-block">
                <div class="code-header">Using lipgloss</div>
                <pre><span class="keyword">import</span> <span class="string">"github.com/charmbracelet/lipgloss"</span>

<span class="comment">// Define styles</span>
<span class="keyword">var</span> (
    titleStyle = lipgloss.<span class="func">NewStyle</span>().
        <span class="func">Bold</span>(<span class="keyword">true</span>).
        <span class="func">Foreground</span>(lipgloss.<span class="func">Color</span>(<span class="string">"#00ff9d"</span>)).
        <span class="func">MarginBottom</span>(<span class="number">1</span>)
    
    selectedStyle = lipgloss.<span class="func">NewStyle</span>().
        <span class="func">Foreground</span>(lipgloss.<span class="func">Color</span>(<span class="string">"#9d00ff"</span>)).
        <span class="func">Bold</span>(<span class="keyword">true</span>)
    
    normalStyle = lipgloss.<span class="func">NewStyle</span>().
        <span class="func">Foreground</span>(lipgloss.<span class="func">Color</span>(<span class="string">"#888888"</span>))
    
    boxStyle = lipgloss.<span class="func">NewStyle</span>().
        <span class="func">Border</span>(lipgloss.RoundedBorder()).
        <span class="func">BorderForeground</span>(lipgloss.<span class="func">Color</span>(<span class="string">"#00ff9d"</span>)).
        <span class="func">Padding</span>(<span class="number">1</span>, <span class="number">2</span>)
)

<span class="keyword">func</span> (m <span class="type">model</span>) <span class="func">View</span>() <span class="type">string</span> {
    title := titleStyle.<span class="func">Render</span>(<span class="string">"Select Tasks"</span>)
    
    <span class="keyword">var</span> items <span class="type">string</span>
    <span class="keyword">for</span> i, choice := <span class="keyword">range</span> m.choices {
        <span class="keyword">if</span> m.cursor == i {
            items += selectedStyle.<span class="func">Render</span>(<span class="string">"‚ùØ "</span>+choice) + <span class="string">"\n"</span>
        } <span class="keyword">else</span> {
            items += normalStyle.<span class="func">Render</span>(<span class="string">"  "</span>+choice) + <span class="string">"\n"</span>
        }
    }
    
    <span class="keyword">return</span> boxStyle.<span class="func">Render</span>(title + items)
}</pre>
            </div>
        </div>

        <div class="lesson">
            <h2>Using Pre-built Components (Bubbles)</h2>
            <div class="code-block">
                <div class="code-header">Text input component</div>
                <pre><span class="keyword">import</span> (
    <span class="string">"github.com/charmbracelet/bubbles/textinput"</span>
    tea <span class="string">"github.com/charmbracelet/bubbletea"</span>
)

<span class="keyword">type</span> <span class="type">model</span> <span class="keyword">struct</span> {
    textInput textinput.Model
    err       <span class="type">error</span>
}

<span class="keyword">func</span> <span class="func">initialModel</span>() <span class="type">model</span> {
    ti := textinput.<span class="func">New</span>()
    ti.<span class="func">Placeholder</span> = <span class="string">"Enter your name"</span>
    ti.<span class="func">Focus</span>()
    ti.CharLimit = <span class="number">50</span>
    ti.Width = <span class="number">30</span>
    
    <span class="keyword">return</span> <span class="type">model</span>{textInput: ti}
}

<span class="keyword">func</span> (m <span class="type">model</span>) <span class="func">Update</span>(msg tea.Msg) (tea.Model, tea.Cmd) {
    <span class="keyword">var</span> cmd tea.Cmd
    
    <span class="keyword">switch</span> msg := msg.(<span class="keyword">type</span>) {
    <span class="keyword">case</span> tea.KeyMsg:
        <span class="keyword">switch</span> msg.<span class="func">Type</span> {
        <span class="keyword">case</span> tea.KeyEnter:
            <span class="keyword">return</span> m, tea.<span class="func">Quit</span>
        <span class="keyword">case</span> tea.KeyCtrlC:
            <span class="keyword">return</span> m, tea.<span class="func">Quit</span>
        }
    }
    
    m.textInput, cmd = m.textInput.<span class="func">Update</span>(msg)
    <span class="keyword">return</span> m, cmd
}

<span class="keyword">func</span> (m <span class="type">model</span>) <span class="func">View</span>() <span class="type">string</span> {
    <span class="keyword">return</span> fmt.<span class="func">Sprintf</span>(
        <span class="string">"What's your name?\n\n%s\n\n%s"</span>,
        m.textInput.<span class="func">View</span>(),
        <span class="string">"(press enter to submit)"</span>,
    )
}</pre>
            </div>
        </div>

        <div class="project-box">
            <h3>üî® Project: File Browser TUI</h3>
            <p>Put your skills to work! Build an interactive terminal file browser with Bubble Tea.</p>
            <a href="project-filebrowser.html" class="nav-btn primary">Start Project ‚Üí</a>
        </div>

        <div class="lesson">
            <h2>Module 8 Summary</h2>
            <ul>
                <li><strong>Bubble Tea</strong> = Elm Architecture for terminals</li>
                <li><strong>Model</strong> = your state</li>
                <li><strong>Update</strong> = handle messages/events</li>
                <li><strong>View</strong> = render state as string</li>
                <li><strong>Lipgloss</strong> = CSS-like styling</li>
                <li><strong>Bubbles</strong> = pre-built components</li>
            </ul>
        </div>

        <div class="exam-section">
            <div class="exam-section-title">Midterm Exam 2</div>
            <div class="exam-section-desc">Test your knowledge of Modules 6-8: CLI, Files, YAML & TUIs</div>
            <button class="exam-section-btn" onclick="window.GamificationUI.startExam('midterm2')">Take Midterm 2</button>
        </div>

        <div class="nav-buttons">
            <a href="module7.html" class="nav-btn">‚Üê Module 7</a>
            <a href="module9.html" class="nav-btn primary">Module 9: Error Handling ‚Üí</a>
        </div>
    </div>
    <script src="theme.js"></script>
    <script src="sidebar.js"></script>
    <script src="gamification.js"></script>
</body>
</html>
